schema: '2.0'
stages:
  prepare:
    cmd: uv run src/prepare.py data/raw
    deps:
    - path: data/raw
      hash: md5
      md5: 0c4677b470c0005e387d356576def49d.dir
      size: 38526262370
      nfiles: 19
    params:
      params.yaml:
        prepare.adjustment.attempted: false
        prepare.adjustment.tool_separate: false
        prepare.dataset: CICIDS2017_improved
        prepare.sampling: undersampling
        prepare.sampling_params.method: Random
        prepare.sampling_params.params:
          sampling_strategy: auto
          seed: 42
        prepare.test_size: 0.3
    outs:
    - path: data/prepared/
      hash: md5
      md5: 4b0d5cc959214462c2d1d8c29ef45385.dir
      size: 61316049
      nfiles: 3
    - path: logs/prepare.log
      hash: md5
      md5: bb276d1b3072eb4a79745d3659a2f3d2
      size: 288
  train:
    cmd: uv run src/train.py --no-offline
    deps:
    - path: data/prepared/train
      hash: md5
      md5: f9365f1d44dd08b6fdc1f00e96985d0b.dir
      size: 10887
      nfiles: 1
    - path: src/classifier
      hash: md5
      md5: 60f8be0b7cb9a30bea64986eab4d0f2a.dir
      size: 4135
      nfiles: 2
    - path: src/train.py
      hash: md5
      md5: 4ccda784bf46e26ac92b8d0e8a446a70
      size: 1959
    params:
      params.yaml:
        mlflow.experiment_name: test
        mlflow.tracking_uri: http://127.0.0.1:5000
        train.classifier.model: ImprovedC45
        train.classifier.params.max_depth: 10
    outs:
    - path: data/models
      hash: md5
      md5: 6c065805fb0beafe6f4fbab17ef22279.dir
      size: 6709
      nfiles: 1
    - path: logs/train.log
      hash: md5
      md5: 0d86a9a5a6df033899e9b891faea2dc5
      size: 278
  evaluate:
    cmd: uv run src/evaluate.py --no-offline
    deps:
    - path: data/prepared/test
      hash: md5
      md5: 68464f035dc55dd7285d31906883adfe.dir
      size: 61305162
      nfiles: 2
    - path: src/classifier
      hash: md5
      md5: 60f8be0b7cb9a30bea64986eab4d0f2a.dir
      size: 4135
      nfiles: 2
    - path: src/evaluate.py
      hash: md5
      md5: 7e870ffe1d616f1bae1dde422a9d8bce
      size: 4377
    params:
      params.yaml:
        mlflow.experiment_name: test
        mlflow.tracking_uri: http://127.0.0.1:5000
    outs:
    - path: evaluate
      hash: md5
      md5: f35f1c1aebc4b3d383c5d1dda860e591.dir
      size: 1572
      nfiles: 2
    - path: logs/evaluate.log
      hash: md5
      md5: cd3099f91c9f868d531fe4fa995d6b65
      size: 193
  check:
    cmd: uv run src/check.py data/raw
    deps:
    - path: data/raw
      hash: md5
      md5: 0c4677b470c0005e387d356576def49d.dir
      size: 38526262370
      nfiles: 19
    - path: src/check.py
      hash: md5
      md5: 15d011a616646cdfb4ad303fe957f92f
      size: 1753
    params:
      params.yaml:
        mlflow.experiment_name: test
        mlflow.tracking_uri: http://127.0.0.1:5000
        prepare.dataset: CICIDS2017_improved
    outs:
    - path: check/
      hash: md5
      md5: b771fe7b13ad430f80961007bfd0438b.dir
      size: 654
      nfiles: 1
    - path: logs/check.log
      hash: md5
      md5: 5452d3bc4e7db3f34e16b0a92410d8b9
      size: 219
